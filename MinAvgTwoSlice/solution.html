<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Missing</title>
    </head>
    
    <body>
  
        <h2>Missing (See console)</h2>

        <h3 style="color:red">Passed correctness, but failed time limits <a href="https://codility.com/demo/results/trainingRWZUCG-CB2/">Link</a></h3>

        <p>A non-empty zero-indexed array A consisting of N integers is given. A pair of integers (P, Q), such that 0 ≤ P < Q < N, is called a slice of array A (notice that the slice contains at least two elements). The average of a slice (P, Q) is the sum of A[P] + A[P + 1] + ... + A[Q] divided by the length of the slice. To be precise, the average equals (A[P] + A[P + 1] + ... + A[Q]) / (Q − P + 1).

            For example, array A such that:

            A[0] = 4
            A[1] = 2
            A[2] = 2
            A[3] = 5
            A[4] = 1
            A[5] = 5
            A[6] = 8
            contains the following example slices:

            slice (1, 2), whose average is (2 + 2) / 2 = 2;
            slice (3, 4), whose average is (5 + 1) / 2 = 3;
            slice (1, 4), whose average is (2 + 2 + 5 + 1) / 4 = 2.5.
            The goal is to find the starting position of a slice whose average is minimal.

            Write a function:

            function solution(A);
            that, given a non-empty zero-indexed array A consisting of N integers, returns the starting position of the slice with the minimal average. If there is more than one slice with a minimal average, you should return the smallest starting position of such a slice.

            For example, given array A such that:

            A[0] = 4
            A[1] = 2
            A[2] = 2
            A[3] = 5
            A[4] = 1
            A[5] = 5
            A[6] = 8
            the function should return 1 (Position of the start of the lowest average slice), as explained above.

            Assume that:

            N is an integer within the range [2..100,000];
            each element of array A is an integer within the range [−10,000..10,000].
            Complexity:

            expected worst-case time complexity is O(N);
            expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).
            Elements of input arrays can be modified.</p>


         <script>
            
            ////////////////////////////////////////////////////////////////////
            // My solution
            ////////////////////////////////////////////////////////////////////
            function solution(A) {
                "use strict";

                var minAverage = Number.MAX_SAFE_INTEGER;
                var minAveragePos = minAverage;
                var index = 0;
                var innerIndex = 0;

                for(index = 0; index < A.length; index++) {
                    var currentValue = A[index];
                    var currentAverage = currentValue;

                    for(innerIndex = index + 1; innerIndex < A.length; innerIndex++) {
                        currentValue += A[innerIndex];
                        currentAverage = currentValue / ((innerIndex + 1) - index);

                        // If the running average is a new low, then record it and its position
                        if(currentAverage < minAverage) {
                            minAverage = currentAverage;
                            minAveragePos = index;
                        }
                    }
                }

                return minAveragePos;
            }



            ////////////////////////////////////////////////////////////////////
            // Tests
            ////////////////////////////////////////////////////////////////////
            console.log("[4, 2, 2, 5, 1, 5, 8] should return '1'. Returns:  " + solution([4, 2, 2, 5, 1, 5, 8]));
            console.log("[-2, 6, 2, 5, 1, 1, 1, 1] should return '4'. Returns:  " + solution([-2, 6, 2, 5, 1, 1, 1, 1]));
            console.log("[-2, 6, 2, 5, 1, 1, 1, 0] should return '6'. Returns:  " + solution([-2, 6, 2, 5, 1, 1, 1, 0]));
            console.log("[0, 0] should return '0'. Returns:  " + solution([0, 0]));

        </script>
  
    </body>
</html>