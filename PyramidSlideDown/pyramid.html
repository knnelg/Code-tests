<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Pyramid Slide Down</title>
    </head>

    <body>

        <h2>Pyramid Slide Down from Codewars site (See console)</h2>

        <p>Pyramids are amazing! Both in architectural and mathematical sense.
            If you have a computer, you can mess with pyramids even if you are
            not in Egypt at the time. For example, let's consider the
            following problem. Imagine that you have a plane pyramid built of
            numbers, like this one here:<p>

        <p>/3/<br />
            \7\ 4 <br />
            2 \4\ 6 <br />
            8 5 \9\ 3</p>


        <p>Here comes the task...</p>

        <p>Let's say that the 'slide down' is a sum of consecutive numbers
            from the top to the bottom of the pyramid. As you can see, the
            longest 'slide down' is 3 + 7 + 4 + 9 = 23</p>

        <p>Your task is to write a function longestSlideDown (in ruby:
            longest_slide_down) that takes a pyramid representation as
            argument and returns its' longest 'slide down'. For example,</p>

        <p>By the way...</p>

        <p>My tests include some extraordinarily high pyramides so as you
            can guess, brute-force method is a bad idea unless you have a
            few centuries to waste. You must come up with something more
            clever than that.</p>

        <p>(c) This task is a lyrical version of the Problem 18 and/or Problem 67 on ProjectEuler.</p>


        <script>

            ////////////////////////////////////////////////////////////////////
            // My solution
            //
            //                  3
            //                 7 4
            //                2 4 6
            //               8 5 9 3
            ////////////////////////////////////////////////////////////////////
            function solution(A) {
                "use strict";
                var result = 0;

                result = getSum(A, 0, 0);

                return result;

            } // End function solution()

            ////////////////////////////////////////////////////////////////////
            // Recursive function to calculate the max value from a given
            // position in the pyramid
            ////////////////////////////////////////////////////////////////////
            function getSum(A, row, column) {
                console.log("processing row/column: " + row + "/" + column + " (" + A[row][column] + ")");
                var result = 0;
                var leftAdjacent;
                var rightAdjacent;

                if(row >= A.length - 1) {
                    return result;
                }

                if(column <= 0) {
                    leftAdjacent = 0;
                }

                else {
                    leftAdjacent = column - 1;
                }

                rightAdjacent = leftAdjacent + 1;


                result = A[row][column];

                var leftValue = getSum(A, row + 1, leftAdjacent);

                var rightValue = getSum(A, row + 1, rightAdjacent);

                if(leftValue >= rightValue) {
                    result += leftValue;
//                    console.log("Using left from row: " + (row + 1) + ", column: " + leftAdjacent + ". Value: " + leftValue);
                }

                else {
                    result += rightValue;
//                    console.log("Using right from row: " + (row + 1) + ", column: " + rightAdjacent + ". Value: " + rightValue);
                }

//                console.log("Returning: " + result);

                return result;

            } // End function getSum()

            ////////////////////////////////////////////////////////////////////
            // Tests
            ////////////////////////////////////////////////////////////////////
            console.log("[[3], [7, 4], [2, 4, 6], [8, 5, 9, 3]] hopefully Returns 23: " + solution([[3], [7, 4], [2, 4, 6], [8, 5, 9, 3]]));

        </script>

</body>
</html>