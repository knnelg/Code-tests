<!DOCTYPE html>
<html>
<!-- ======================================================================= -->
<!-- =                                                                     = -->
<!-- ======================================================================= -->
<head>
    <meta charset="UTF-8">
    <title>Array sort</title>
</head>

<!-- ======================================================================= -->
<!-- =                                                                     = -->
<!-- ======================================================================= -->
<body>

<div>
    <p>Array sort test.  <b>See console for output</b>.</p>
</div>


<script>
    ////////////////////////////////////////////////////////////////////////////
    // Q1 - 35/40 mins (can't remember, think its 40)
    //
    // Assume array exists, and has at least 1 number, and all values are integer.
    //
    // Write a function that has an input of an array and returns true or false.
    //
    // It will return true if changing only one set of numbers about will make
    // the array sorted.
    //
    // i.e. if array is [1,3,7,5,4] would be true as you just have to swap the 7
    // and the 4.
    //
    // Array [1,3,6,5,9,7] would be false as one swap will not make the array
    // sorted.
    ////////////////////////////////////////////////////////////////////////////
    function test(input) {
        // Record number of differences between the two arrays
        var differenceCount = 0;

        // Clone the input array, so we can sort it without affecting the
        // original
        var sorted = input.slice(0);

        // Sort the cloned array (Need to use separate compare function to
        // ensure comparison is done as an numeric rather than ISO char)
        sorted.sort(compare);

        // Loop through the array(s) comparing each element
        for(var index = 0; index < input.length; ++index) {
            // If we find a difference, increment the count
//            console.log("Original " + input[index] + ", sorted " + sorted[index]);
            if(input[index] !== sorted[index]) {
                differenceCount++;
            }
        }

        // If we have more than 2 differences (each swap will result in 2
        // differences)
        if(differenceCount > 2) {
            return false;
        }

        else {
            return true;
        }

        ////////////////////////////////////////////////////////////////////////
        // Function to return a negative, 0 or positive value based on 'numeric'
        // comparison
        ////////////////////////////////////////////////////////////////////////
        function compare(first, second) {
            // Math operator forces items to numbers
            return first - second;
        }
    }

    ////////////////////////////////////////////////////////////////////////////
    // Run some tests
    ////////////////////////////////////////////////////////////////////////////
    console.log("result for [1,3,7,5,4]: " + test([1,3,7,5,4]));
    console.log("result for [1,3,6,5,9,7]: " + test([1,3,6,5,9,7]));
    console.log("result for [1,3,13,7,9,11,5]: " + test([1,3,13,7,9,11,5]));
    console.log("result for [1,3,13,9,7,11,5]: " + test([1,3,13,9,7,11,5]));
    console.log("result for []: " + test([]));
    console.log("result for [0,0,0,0,0,0]: " + test([0,0,0,0,0,0]));



</script>



</body>

</html>